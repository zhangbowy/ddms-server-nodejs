"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Creator = {
    parse(name, msg_desc) {
        return (new CreatorUnit(name, msg_desc)).create();
    }
};
class CreatorUnit {
    constructor(name, msg_desc) {
        this._used_code = 0;
        this._name = '';
        this._msg_desc = msg_desc;
        this._name = name;
    }
    _generate_line(line) {
        let out_line = [];
        if (line.repeated) {
            out_line.push('repeated');
        }
        else if (line.reauqred) {
            out_line.push('required');
        }
        else {
            out_line.push('optional');
        }
        out_line.push(line.type);
        out_line.push(`${line.name}=${++this._used_code}`);
        if (line.default) {
            out_line.push(`[default=${line.default}]`);
        }
        return out_line.join(' ') + ';';
    }
    create() {
        let out_line = [];
        out_line.push(`message ${this._name} {`);
        for (let i = 0; i < this._msg_desc.length; i++) {
            out_line.push(this._generate_line(this._msg_desc[i]));
        }
        out_line.push('}');
        return out_line.join('\r\n');
    }
}
